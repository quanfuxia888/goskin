# Quanfuxia ğŸ”§

ä¸€å¥—ç°ä»£åŒ–ã€ä¼ä¸šçº§çš„ Go è¯­è¨€åç«¯æœåŠ¡éª¨æ¶ï¼ŒåŸºäº [Gin](https://github.com/gin-gonic/gin) æ¡†æ¶æ„å»ºï¼Œé›†æˆé…ç½®ç®¡ç†ã€å¤šè¯­è¨€æ”¯æŒã€JWT é‰´æƒã€æ—¥å¿—ã€æ•°æ®åº“/ç¼“å­˜/RabbitMQ åˆå§‹åŒ–ã€ä»£ç ç”Ÿæˆå™¨ã€åˆ†å±‚è§£è€¦ç­‰æœ€ä½³å®è·µã€‚

---

## ğŸ§± é¡¹ç›®ç»“æ„ç®€ä»‹

quanfuxia/
â”œâ”€â”€ cmd/ // å­å‘½ä»¤å…¥å£ï¼šHTTPæœåŠ¡ã€workerã€æ¶ˆæ¯æ¶ˆè´¹è€…ç­‰
â”œâ”€â”€ configs/ // å¤šç¯å¢ƒé…ç½®æ–‡ä»¶
â”œâ”€â”€ internal/ // å†…éƒ¨ä¸šåŠ¡æ¨¡å—ï¼ˆç¦æ­¢å¤–éƒ¨å¼•ç”¨ï¼‰
â”‚ â”œâ”€â”€ api/ // è¯·æ±‚å…¥å£å±‚ï¼ŒæŒ‰é¢†åŸŸåˆ’åˆ†ï¼ˆå¦‚ userï¼‰
â”‚ â”œâ”€â”€ service/ // æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å±‚
â”‚ â”œâ”€â”€ domain/ // é¢†åŸŸæ¨¡å‹é¢„ç•™
â”‚ â”œâ”€â”€ repository/ // æ•°æ®è®¿é—®å±‚ï¼Œæ”¯æŒå¤šç§æ•°æ®æºï¼ˆMySQL/Redisï¼‰
â”‚ â”œâ”€â”€ model/ // ç»“æ„ä½“å®šä¹‰ï¼Œå« gorm ç”Ÿæˆçš„ model
â”‚ â”œâ”€â”€ route/ // è·¯ç”±æ³¨å†Œ
â”‚ â”œâ”€â”€ job/ // æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ä»»åŠ¡
â”‚ â”œâ”€â”€ middleware/ // Gin ä¸­é—´ä»¶
â”‚ â””â”€â”€ common/ // å“åº”å°è£…ã€é”™è¯¯ç ã€å¤šè¯­è¨€ã€JWT ç­‰é€šç”¨å·¥å…·
â”œâ”€â”€ pkg/ // ç¬¬ä¸‰æ–¹å·¥å…·å°è£…ï¼ˆviper/zap/mysql/redis/mq ç­‰ï¼‰
â”œâ”€â”€ logs/ // æ—¥å¿—ç›®å½•
â”œâ”€â”€ scripts/ // å¯æ‰§è¡Œè„šæœ¬æˆ– SQL åˆå§‹åŒ–
â”œâ”€â”€ go.mod / go.sum
â””â”€â”€ main.go // åº”ç”¨å…¥å£ï¼Œæ‰§è¡Œ RootCmd

---

## âœ¨ æŠ€æœ¯æ ˆä¸ç‰¹æ€§

| ç±»åˆ«       | æŠ€æœ¯ä¸è¯´æ˜                                       |
|------------|--------------------------------------------------|
| Webæ¡†æ¶     | [Gin](https://github.com/gin-gonic/gin)         |
| é…ç½®ç®¡ç†     | [Viper](https://github.com/spf13/viper)        |
| è·¯ç”±æ§åˆ¶     | åˆ†ç»„è·¯ç”± + ä¸­é—´ä»¶æ³¨å†Œ                          |
| ORMå±‚       | [GORM](https://gorm.io/) + `gorm/gen` ä»£ç ç”Ÿæˆ |
| æ—¥å¿—ç³»ç»Ÿ     | [Zap](https://github.com/uber-go/zap) + åˆ†å‰²æ—¥å¿— |
| å‚æ•°æ ¡éªŒ     | validator.v10 + å¤šè¯­è¨€é”™è¯¯æç¤ºæ”¯æŒ              |
| æƒé™ç³»ç»Ÿ     | JWT è®¤è¯ + RefreshToken + Redis çŠ¶æ€ç®¡ç†       |
| æ¶ˆæ¯é˜Ÿåˆ—     | RabbitMQï¼ˆé¢„ç•™æ¥å…¥ï¼‰                            |
| å¤šè¯­è¨€æ”¯æŒ   | universal-translator + è‡ªå®šä¹‰è¯­è¨€åŒ…åŠ è½½         |
| å‘½ä»¤è¡Œå·¥å…·   | Cobraï¼ˆæ”¯æŒ `serve` / `gen` å‘½ä»¤ï¼‰              |
| å®¹å™¨æ”¯æŒ     | Dockerfileï¼ˆé¢„ç•™ï¼‰                              |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/quanfuxia888/goskin.git
cd goskin
go mod tidy
```
### 2. é…ç½®æ–‡ä»¶
é»˜è®¤é…ç½®è·¯å¾„ä¸º configs/config.yamlï¼Œä½ å¯é€šè¿‡ --config å‚æ•°æŒ‡å®šå…¶ä»–é…ç½®ï¼š


### å¯åŠ¨æœåŠ¡
```bash
go run main.go serve
```
### ç”Ÿæˆ GORM æ¨¡å‹ä»£ç 
```bash
# ç”Ÿæˆæ‰€æœ‰è¡¨
go run main.go gen

# æŒ‡å®šè¡¨
go run main.go gen --tables=wa_user,wa_order
```
### æ¥å£ç¤ºä¾‹
1. ç”¨æˆ·æ³¨å†Œ
POST /api/user/register
{
  "username": "test",
  "password": "123456"
}

2. ç™»å½•
POST /api/user/login
â†’ è¿”å› access_tokenã€refresh_tokenã€è¿‡æœŸæ—¶é—´æˆ³

3. åˆ·æ–° Token
POST /api/user/refresh
{
  "refresh_token": "xxx"
}

RefreshToken ç»‘å®šå”¯ä¸€ JTIï¼ˆUUIDï¼‰

Redis çŠ¶æ€ç®¡ç†ï¼šé˜²æ­¢é‡å¤åˆ·æ–°ã€æ”¯æŒç™»å‡ºä½œåºŸ

å¤šè¯­è¨€æ”¯æŒç™»å½•éªŒè¯ã€Token é”™è¯¯æç¤º